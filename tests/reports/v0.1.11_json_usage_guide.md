# JSON Output Usage Guide - v0.1.11

A quick reference for using JSON output with ainative-code CLI.

---

## Available Commands with JSON Support

### Session Commands
```bash
# List all sessions as JSON
ainative-code session list --json

# Search sessions with JSON output
ainative-code session search "keyword" --json
```

### MCP Commands
```bash
# List MCP servers as JSON
ainative-code mcp list-servers --json

# List available MCP tools as JSON
ainative-code mcp list-tools --json
```

### ZeroDB Commands (Requires API credentials)
```bash
# All table operations support JSON
zerodb table create --json
zerodb table list --json
zerodb table insert --json
zerodb table query --json
zerodb table update --json
zerodb table delete --json
```

### RLHF Commands (Requires API credentials)
```bash
# All RLHF operations support JSON
rlhf interaction --json
rlhf analytics --json
rlhf correction --json
```

---

## Common Usage Patterns

### Extract Specific Fields
```bash
# Get just the session IDs
ainative-code session list --json | jq -r '.[].id'

# Get session names and statuses
ainative-code session list --json | jq -r '.[] | "\(.name): \(.status)"'
```

### Filter Results
```bash
# Find active sessions only
ainative-code session list --json | jq '.[] | select(.status=="active")'

# Count sessions
ainative-code session list --json | jq 'length'
```

### Transform Data
```bash
# Create custom JSON structure
ainative-code session list --json | jq '[.[] | {id, title: .name}]'

# Sort by date
ainative-code session list --json | jq 'sort_by(.created_at)'
```

### Save to File
```bash
# Export sessions to file
ainative-code session list --all --json > sessions.json

# Pretty-print saved file
jq '.' sessions.json
```

### Integration with Other Tools
```bash
# Convert to CSV
ainative-code session list --json | jq -r '.[] | [.id, .name, .status] | @csv'

# Count and summarize
ainative-code session list --json | jq 'group_by(.status) | map({status: .[0].status, count: length})'
```

---

## Error Handling

JSON commands properly separate errors to stderr:

```bash
# Errors don't pollute JSON output
ainative-code session list --json > sessions.json 2> errors.log

# Suppress errors when needed
ainative-code session list --json 2>/dev/null
```

---

## Tips & Best Practices

1. **Always use --json flag** - Ensures machine-readable output
2. **Pipe to jq for validation** - Catches any JSON syntax issues
3. **Save to file for large datasets** - Easier to work with
4. **Use jq filters early** - More efficient than processing full output
5. **Check stderr for errors** - Errors won't appear in JSON output

---

## Troubleshooting

### Issue: "parse error" from jq
**Cause:** Invalid JSON output
**Solution:** Check stderr for error messages
```bash
ainative-code session list --json 2>&1 | less
```

### Issue: Empty output
**Cause:** No results found
**Solution:** Commands return empty arrays/objects, which is valid JSON
```bash
ainative-code session list --json | jq 'length'
# Returns: 0
```

### Issue: Seeing log messages in output
**Cause:** Using older version without fixes
**Solution:** Upgrade to v0.1.11+ which fixes logger output

---

## Quick Reference

| Command | JSON Flag | Output Type |
|---------|-----------|-------------|
| session list | ✓ | array |
| session search | ✓ | object |
| mcp list-servers | ✓ | array |
| mcp list-tools | ✓ | array |
| zerodb table * | ✓ | varies |
| rlhf * | ✓ | varies |

---

**Version:** v0.1.11+
**Last Updated:** 2026-01-12
